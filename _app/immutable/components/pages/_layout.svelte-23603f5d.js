import{S as R,i as L,s as k,B as j,C as A,D as U,E as I,f as $,t as O,o as M}from"../../chunks/index-bf283ca9.js";import{w as b}from"../../chunks/index-18da49c2.js";try{self["workbox:window:6.5.3"]&&_()}catch{}function E(t,r){return new Promise(function(n){var i=new MessageChannel;i.port1.onmessage=function(o){n(o.data)},t.postMessage(r,[i.port2])})}function N(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function P(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function T(t,r){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(o,v){if(o){if(typeof o=="string")return P(o,v);var s=Object.prototype.toString.call(o).slice(8,-1);return s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set"?Array.from(o):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?P(o,v):void 0}}(t))||r&&t&&typeof t.length=="number"){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.3"]&&_()}catch{}var y=function(){var t=this;this.promise=new Promise(function(r,n){t.resolve=r,t.reject=n})};function S(t,r){var n=location.href;return new URL(t,n).href===new URL(r,n).href}var p=function(t,r){this.type=t,Object.assign(this,r)};function g(t,r,n){return n?r?r(t):t:(t&&t.then||(t=Promise.resolve(t)),r?t.then(r):t)}function C(){}var x={type:"SKIP_WAITING"};function W(t,r){if(!r)return t&&t.then?t.then(C):Promise.resolve()}var B=function(t){var r,n;function i(l,f){var e,a;return f===void 0&&(f={}),(e=t.call(this)||this).nn={},e.tn=0,e.rn=new y,e.en=new y,e.on=new y,e.un=0,e.an=new Set,e.cn=function(){var u=e.fn,c=u.installing;e.tn>0||!S(c.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=c,u.removeEventListener("updatefound",e.cn)):(e.hn=c,e.an.add(c),e.rn.resolve(c)),++e.tn,c.addEventListener("statechange",e.ln)},e.ln=function(u){var c=e.fn,d=u.target,h=d.state,m=d===e.vn,w={sw:d,isExternal:m,originalEvent:u};!m&&e.mn&&(w.isUpdate=!0),e.dispatchEvent(new p(h,w)),h==="installed"?e.wn=self.setTimeout(function(){h==="installed"&&c.waiting===d&&e.dispatchEvent(new p("waiting",w))},200):h==="activating"&&(clearTimeout(e.wn),m||e.en.resolve(d))},e.dn=function(u){var c=e.hn,d=c!==navigator.serviceWorker.controller;e.dispatchEvent(new p("controlling",{isExternal:d,originalEvent:u,sw:c,isUpdate:e.mn})),d||e.on.resolve(c)},e.gn=(a=function(u){var c=u.data,d=u.ports,h=u.source;return g(e.getSW(),function(){e.an.has(h)&&e.dispatchEvent(new p("message",{data:c,originalEvent:u,ports:d,sw:h}))})},function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];try{return Promise.resolve(a.apply(this,u))}catch(d){return Promise.reject(d)}}),e.sn=l,e.nn=f,navigator.serviceWorker.addEventListener("message",e.gn),e}n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n;var o,v,s=i.prototype;return s.register=function(l){var f=(l===void 0?{}:l).immediate,e=f!==void 0&&f;try{var a=this;return function(u,c){var d=u();return d&&d.then?d.then(c):c(d)}(function(){if(!e&&document.readyState!=="complete")return W(new Promise(function(u){return window.addEventListener("load",u)}))},function(){return a.mn=Boolean(navigator.serviceWorker.controller),a.yn=a.pn(),g(a.bn(),function(u){a.fn=u,a.yn&&(a.hn=a.yn,a.en.resolve(a.yn),a.on.resolve(a.yn),a.yn.addEventListener("statechange",a.ln,{once:!0}));var c=a.fn.waiting;return c&&S(c.scriptURL,a.sn.toString())&&(a.hn=c,Promise.resolve().then(function(){a.dispatchEvent(new p("waiting",{sw:c,wasWaitingBeforeRegister:!0}))}).then(function(){})),a.hn&&(a.rn.resolve(a.hn),a.an.add(a.hn)),a.fn.addEventListener("updatefound",a.cn),navigator.serviceWorker.addEventListener("controllerchange",a.dn),a.fn})})}catch(u){return Promise.reject(u)}},s.update=function(){try{return this.fn?W(this.fn.update()):void 0}catch(l){return Promise.reject(l)}},s.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},s.messageSW=function(l){try{return g(this.getSW(),function(f){return E(f,l)})}catch(f){return Promise.reject(f)}},s.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&E(this.fn.waiting,x)},s.pn=function(){var l=navigator.serviceWorker.controller;return l&&S(l.scriptURL,this.sn.toString())?l:void 0},s.bn=function(){try{var l=this;return function(f,e){try{var a=f()}catch(u){return e(u)}return a&&a.then?a.then(void 0,e):a}(function(){return g(navigator.serviceWorker.register(l.sn,l.nn),function(f){return l.un=performance.now(),f})},function(f){throw f})}catch(f){return Promise.reject(f)}},o=i,(v=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&N(o.prototype,v),i}(function(){function t(){this.Pn=new Map}var r=t.prototype;return r.addEventListener=function(n,i){this.Sn(n).add(i)},r.removeEventListener=function(n,i){this.Sn(n).delete(i)},r.dispatchEvent=function(n){n.target=this;for(var i,o=T(this.Sn(n.type));!(i=o()).done;)(0,i.value)(n)},r.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function G(t={}){const{immediate:r=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:o,onRegisterError:v}=t;let s,l;const f=async(e=!0)=>{e&&(s==null||s.addEventListener("controlling",a=>{a.isUpdate&&window.location.reload()})),l&&l.waiting&&await E(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){s=new B("/Aphasia-App/sw.js",{scope:"/Aphasia-App/",type:"classic"}),s.addEventListener("activated",e=>{e.isUpdate||i==null||i()});{const e=()=>{n==null||n()};s.addEventListener("waiting",e),s.addEventListener("externalwaiting",e)}s.register({immediate:r}).then(e=>{l=e,o==null||o(e)}).catch(e=>{v==null||v(e)})}return f}function K(t={}){const{immediate:r=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:o,onRegisterError:v}=t,s=b(!1),l=b(!1),f=G({immediate:r,onOfflineReady(){l.set(!0),i==null||i()},onNeedRefresh(){s.set(!0),n==null||n()},onRegistered:o,onRegisterError:v});return{needRefresh:s,offlineReady:l,updateServiceWorker:f}}function q(t){let r;const n=t[1].default,i=j(n,t,t[0],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,v){i&&i.m(o,v),r=!0},p(o,[v]){i&&i.p&&(!r||v&1)&&A(i,n,o,o[0],r?I(n,o[0],v,null):U(o[0]),null)},i(o){r||($(i,o),r=!0)},o(o){O(i,o),r=!1},d(o){i&&i.d(o)}}}function D(t,r,n){let{$$slots:i={},$$scope:o}=r;M(()=>{v()});function v(){K({onRegistered(s){s&&s.update()}})}return t.$$set=s=>{"$$scope"in s&&n(0,o=s.$$scope)},[o,i]}class H extends R{constructor(r){super(),L(this,r,D,q,k,{})}}export{H as default};
