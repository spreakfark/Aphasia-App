import{S as W,i as k,s as L,B as j,C as U,D as $,E as O,f as A,t as I,o as M}from"../../chunks/index-bf283ca9.js";import{w as S}from"../../chunks/index-18da49c2.js";try{self["workbox:window:6.5.3"]&&_()}catch{}function E(e,n){return new Promise(function(r){var t=new MessageChannel;t.port1.onmessage=function(i){r(i.data)},e.postMessage(n,[t.port2])})}function C(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function R(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function N(e,n){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=function(i,f){if(i){if(typeof i=="string")return R(i,f);var a=Object.prototype.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(i,f):void 0}}(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(r=e[Symbol.iterator]()).next.bind(r)}try{self["workbox:core:6.5.3"]&&_()}catch{}var w=function(){var e=this;this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})};function b(e,n){var r=location.href;return new URL(e,r).href===new URL(n,r).href}var p=function(e,n){this.type=e,Object.assign(this,n)};function g(e,n,r){return r?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e)}function T(){}var B={type:"SKIP_WAITING"};function P(e,n){if(!n)return e&&e.then?e.then(T):Promise.resolve()}var x=function(e){var n,r;function t(d,c){var o,s;return c===void 0&&(c={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new w,o.en=new w,o.on=new w,o.un=0,o.an=new Set,o.cn=function(){var l=o.fn,u=l.installing;o.tn>0||!b(u.scriptURL,o.sn.toString())||performance.now()>o.un+6e4?(o.vn=u,l.removeEventListener("updatefound",o.cn)):(o.hn=u,o.an.add(u),o.rn.resolve(u)),++o.tn,u.addEventListener("statechange",o.ln)},o.ln=function(l){var u=o.fn,v=l.target,h=v.state,m=v===o.vn,y={sw:v,isExternal:m,originalEvent:l};!m&&o.mn&&(y.isUpdate=!0),o.dispatchEvent(new p(h,y)),h==="installed"?o.wn=self.setTimeout(function(){h==="installed"&&u.waiting===v&&o.dispatchEvent(new p("waiting",y))},200):h==="activating"&&(clearTimeout(o.wn),m||o.en.resolve(v))},o.dn=function(l){var u=o.hn,v=u!==navigator.serviceWorker.controller;o.dispatchEvent(new p("controlling",{isExternal:v,originalEvent:l,sw:u,isUpdate:o.mn})),v||o.on.resolve(u)},o.gn=(s=function(l){var u=l.data,v=l.ports,h=l.source;return g(o.getSW(),function(){o.an.has(h)&&o.dispatchEvent(new p("message",{data:u,originalEvent:l,ports:v,sw:h}))})},function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];try{return Promise.resolve(s.apply(this,l))}catch(v){return Promise.reject(v)}}),o.sn=d,o.nn=c,navigator.serviceWorker.addEventListener("message",o.gn),o}r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,f,a=t.prototype;return a.register=function(d){var c=(d===void 0?{}:d).immediate,o=c!==void 0&&c;try{var s=this;return function(l,u){var v=l();return v&&v.then?v.then(u):u(v)}(function(){if(!o&&document.readyState!=="complete")return P(new Promise(function(l){return window.addEventListener("load",l)}))},function(){return s.mn=Boolean(navigator.serviceWorker.controller),s.yn=s.pn(),g(s.bn(),function(l){s.fn=l,s.yn&&(s.hn=s.yn,s.en.resolve(s.yn),s.on.resolve(s.yn),s.yn.addEventListener("statechange",s.ln,{once:!0}));var u=s.fn.waiting;return u&&b(u.scriptURL,s.sn.toString())&&(s.hn=u,Promise.resolve().then(function(){s.dispatchEvent(new p("waiting",{sw:u,wasWaitingBeforeRegister:!0}))}).then(function(){})),s.hn&&(s.rn.resolve(s.hn),s.an.add(s.hn)),s.fn.addEventListener("updatefound",s.cn),navigator.serviceWorker.addEventListener("controllerchange",s.dn),s.fn})})}catch(l){return Promise.reject(l)}},a.update=function(){try{return this.fn?P(this.fn.update()):void 0}catch(d){return Promise.reject(d)}},a.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(d){try{return g(this.getSW(),function(c){return E(c,d)})}catch(c){return Promise.reject(c)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&E(this.fn.waiting,B)},a.pn=function(){var d=navigator.serviceWorker.controller;return d&&b(d.scriptURL,this.sn.toString())?d:void 0},a.bn=function(){try{var d=this;return function(c,o){try{var s=c()}catch(l){return o(l)}return s&&s.then?s.then(void 0,o):s}(function(){return g(navigator.serviceWorker.register(d.sn,d.nn),function(c){return d.un=performance.now(),c})},function(c){throw c})}catch(c){return Promise.reject(c)}},i=t,(f=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&C(i.prototype,f),t}(function(){function e(){this.Pn=new Map}var n=e.prototype;return n.addEventListener=function(r,t){this.Sn(r).add(t)},n.removeEventListener=function(r,t){this.Sn(r).delete(t)},n.dispatchEvent=function(r){r.target=this;for(var t,i=N(this.Sn(r.type));!(t=i()).done;)(0,t.value)(r)},n.Sn=function(r){return this.Pn.has(r)||this.Pn.set(r,new Set),this.Pn.get(r)},e}());function q(e={}){const{immediate:n=!1,onNeedRefresh:r,onOfflineReady:t,onRegistered:i,onRegisterError:f}=e;let a;const d=async(c=!0)=>{};return"serviceWorker"in navigator&&(a=new x("/sw.js",{scope:"/",type:"classic"}),a.addEventListener("activated",c=>{c.isUpdate?window.location.reload():t==null||t()}),a.register({immediate:n}).then(c=>{i==null||i(c)}).catch(c=>{f==null||f(c)})),d}function D(e={}){const{immediate:n=!0,onNeedRefresh:r,onOfflineReady:t,onRegistered:i,onRegisterError:f}=e,a=S(!1),d=S(!1),c=q({immediate:n,onOfflineReady(){d.set(!0),t==null||t()},onNeedRefresh(){a.set(!0),r==null||r()},onRegistered:i,onRegisterError:f});return{needRefresh:a,offlineReady:d,updateServiceWorker:c}}function G(e){let n;const r=e[1].default,t=j(r,e,e[0],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,f){t&&t.m(i,f),n=!0},p(i,[f]){t&&t.p&&(!n||f&1)&&U(t,r,i,i[0],n?O(r,i[0],f,null):$(i[0]),null)},i(i){n||(A(t,i),n=!0)},o(i){I(t,i),n=!1},d(i){t&&t.d(i)}}}function K(e,n,r){let{$$slots:t={},$$scope:i}=n;return M(async()=>{const f=D({onRegistered(a){a&&a.update()}});f.offlineReady.subscribe(a=>{console.log("offlineReady: "+a)}),f.needRefresh.subscribe(a=>{console.log("needRefresh: "+a)})}),e.$$set=f=>{"$$scope"in f&&r(0,i=f.$$scope)},[i,t]}class H extends W{constructor(n){super(),k(this,n,K,G,L,{})}}export{H as default};
